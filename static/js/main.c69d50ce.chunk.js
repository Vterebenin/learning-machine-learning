(this["webpackJsonplearning-machine-learning"]=this["webpackJsonplearning-machine-learning"]||[]).push([[0],{36:function(e,t,n){e.exports=n(61)},41:function(e,t,n){},42:function(e,t,n){},49:function(e,t){},50:function(e,t){},51:function(e,t){},52:function(e,t){},53:function(e,t){},54:function(e,t){},55:function(e,t,n){},56:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(11),o=n.n(s),r=(n(41),n(12)),c=n(13),l=n(16),u=n(14),h=n(17),m=(n(42),n(21)),d=n.n(m),f=n(26),p=n(10),b=n(29),v=n.n(b),g=n(75),E=n(76),k=n(34),j=n(30),O=n(31),x=(n(55),function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043e\u0431\u0443\u0447\u0430\u0435\u043c\u0443\u044e \u043c\u043e\u0434\u0435\u043b\u044c"),i.a.createElement("div",{id:"loader"}))}}]),t}(a.Component)),w=(n(56),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).infoTexts=[],n.isTraining=!0,n.training=-1,n.recordSamples=!1,n.classes=["Left","Right"],n.testPrediction=!1,n.training=!0,n.numberOfSubjects=2,n.handleMouseDown=n.handleMouseDown.bind(Object(p.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(p.a)(n)),n.startPredictions=n.startPredictions.bind(Object(p.a)(n)),n.animate=n.animate.bind(Object(p.a)(n)),n.state={loading:!1,info:[]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"startPredictions",value:function(){this.testPrediction=!0}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.loadClassifierAndModel().then(function(){return e.setState({loading:!1})}),this.setup()}},{key:"componentDidUpdate",value:function(e,t,n){this.video=document.getElementById("webCam")}},{key:"loadClassifierAndModel",value:function(){var e=Object(f.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.knn=j.a(),e.next=3,O.a();case 3:this.mobilenetModule=e.sent,console.log(this.video),console.log("model loaded"),this.start();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleMouseDown",value:function(e){this.training=e,this.recordSamples=!0}},{key:"handleMouseUp",value:function(){this.training=-1}},{key:"setup",value:function(){for(var e=0;e<this.numberOfSubjects;e++){this.infoTexts.push("\u041d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432")}this.setState({info:this.infoTexts})}},{key:"start",value:function(){this.timer&&this.stop(),this.timer=requestAnimationFrame(this.animate)}},{key:"stop",value:function(){cancelAnimationFrame(this.timer)}},{key:"animate",value:function(){var e=Object(f.a)(d.a.mark(function e(){var t,n,a,i,s,o,r,c,l,u=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.recordSamples){e.next=17;break}if(t=k.a.fromPixels(this.video),a=function(){return u.mobilenetModule.infer(t,"conv_preds")},-1!==this.training&&(n=a(),this.knn.addExample(n,this.training)),i=this.knn.getNumClasses(),!this.testPrediction){e.next=14;break}if(this.isTraining=!1,!(i>0)){e.next=14;break}return n=a(),e.next=11,this.knn.predictClass(n,10);case 11:for(s=e.sent,console.log(s.confidences),o=0;o<this.numberOfSubjects;o++)(r=this.knn.getClassExampleCount())[o]>0&&(this.infoTexts[o]=" ".concat(r[o]," \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 - ").concat(100*s.confidences[o],"%"),this.setState({info:this.infoTexts}));case 14:if(this.isTraining)for(c=this.knn.getClassExampleCount(),l=0;l<this.numberOfSubjects;l++)c[l]>0&&(this.infoTexts[l]=" \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e ".concat(c[l]," \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432"),this.setState({info:this.infoTexts}));t.dispose(),null!=n&&n.dispose();case 17:this.timer=requestAnimationFrame(this.animate);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return i.a.createElement(g.a,{container:!0,alignItems:"center"},this.state.loading?i.a.createElement(g.a,{item:!0,md:12},i.a.createElement(x,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{item:!0,xs:12,md:4},i.a.createElement(E.a,{className:"button",variant:"contained",onMouseDown:function(){return e.handleMouseDown(0)},onMouseUp:function(){return e.handleMouseUp()}},"\u041f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0432\u0430"),i.a.createElement("p",null,this.infoTexts[0])),i.a.createElement(g.a,{item:!0,xs:12,md:4},i.a.createElement(v.a,{id:"webCam",width:227,height:227})),i.a.createElement(g.a,{item:!0,xs:12,md:4},i.a.createElement(E.a,{className:"button",variant:"contained",onMouseDown:function(){return e.handleMouseDown(1)},onMouseUp:function(){return e.handleMouseUp()}},"\u041f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u043f\u0440\u0430\u0432\u0430"),i.a.createElement("p",null,this.infoTexts[1])),i.a.createElement(g.a,{item:!0,md:12},i.a.createElement(E.a,{onClick:this.startPredictions,variant:"contained"},"\u041f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0430\u0442\u044c!"))))}}]),t}(i.a.Component)),y=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"App-header"},i.a.createElement("h3",null,"\u0412\u0430\u0448\u0435 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f!"),i.a.createElement("h4",null,"\u041a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?"),i.a.createElement("ol",{className:"tutorial"},i.a.createElement("li",null,"\u041d\u0430\u0442\u0440\u0435\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u043d\u0435\u0439\u0440\u043e\u0441\u0435\u0442\u044c \u0441 \u0443\u043a\u043e\u043b\u043e\u043d\u043e\u043c \u0442\u0435\u043b\u0430/\u0433\u043e\u043b\u043e\u0432\u044b \u0432\u043b\u0435\u0432\u043e \u0438 \u0432\u043f\u0440\u0430\u0432\u043e"),i.a.createElement("li",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c!")),i.a.createElement(w,null)))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.c69d50ce.chunk.js.map